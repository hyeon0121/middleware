# 로그

# 1. 콘솔로그

콘솔상에서 발생하는 모든 로그

GC로그나 log4j를 사용한 경우에 대한 로그 형태도 기록

웹로직 서버에서의 로그 레벨이나, System.out으로 출력하는 메시지 기록

서버로그 내용도 포함되어 있음

### 로그 설정

- 스크립트 기동 방식
    
    **>(redirect)**를 사용해 스크립트 수행 시 발생하는 콘솔로그를 대상 파일에 저장
    

### 로그 순환

- 가장 간단한 방법 : 서버 재기동 전 기존 로그 백업 후 다시 로그 기록

```bash
**mv $LOG_DIR/admin.out $LOG_DIR/admin.out.`date+'%m%d_%H%M%S'`**
nohup .. 2>&1 & -- 서버 기동 스크립트 실행
```

→ 하지만 서버 재기동 전에 순환이 안되고, 로그 별도 가공과 백업이 힘들다는 단점 존재

- 유닉스/리눅스 환경 : null copy 이용 가능
    1. 기존 로그를 복사해 백업
    2. 현재 기록되고 있는 로그를 빈 상태로 만듦

```bash
cp $LOG_DIR/$SERVER_NAME.out $LOG_DIR/$SERVER_NAME.out`date+'%m%d_%H%M%S'`
**cp /dev/null $LOG_DIR/$SERVER_NAME.out**
```

# 2. 서버로그

웹로직 고유 코드가 붙은 로그들만 기록된다. **<BEA-*>**와 같은 형태 

GC, 에코, 애플리케이션 메시지는 제외되고, **웹로직에서 기록하고자 하는 정보**만 기록됨

### 로그 설정

서버로그 설정 값은 웹로직 고유 서버로그, 콘솔로그 기록 방식에 영향을 줌

서버로그 레벨이 상세하게 변경될수록 웹로직 상태가 어떻게 변화하고, 어떤 작업이 수행되는지 파악 가능

- 어드민 콘솔 > Servers > [Server Name] > Logging 에서 설정

### 로그 순환

시간과 용량을 기준으로 순환 가능

- 파일 크기 기준 : kbyte(킬로바이트) 단위로 설정
- 시간 기준 : 로그순환 시작 시간, 시간 간격 설정
- **유지되는 파일 수 제한** : 순환되는 로그의 파일 개수 설정

# 3. Log4j

자바 환경을 위한 로그 프로젝트 중 하나

애플리케이션 로그에 대한 일관된 출력과 내용을 형식화할 수 있어, 최근 애플리케이션에서 즐겨 사용되는 로깅 방법 중 하나

웹로직 9.0이상 버전부터 설정 가능